<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<title>GRMAPlayer Include File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.0.0 on Thu Jan 27 18:46:18 2000 -->
<center>
<a class="qindex"href="index.html">Main Page</a> &nbsp; <a class="qindex"href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex"href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex"href="annotated.html">Compound List</a> &nbsp; <a class="qindex"href="files.html">File List</a> &nbsp; <a class="qindex"href="headers.html">Header Files</a> &nbsp; <a class="qindex"href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex"href="functions.html">Compound Members</a> &nbsp; <a class="qindex"href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>grmaplay.h</h1>This is the verbatim text of the grmaplay.h include file.<div class="fragment"><pre>
#ifndef _GRMAPlay_h_
#define _GRMAPlay_h_

#ifndef TRACE

// TRACE support (instead of printf)
#ifdef _DEBUG
extern void <a class="code" href="grmaplay.h.html#a1">GRMATrace</a>(LPCTSTR lpszFormat, ...);
#define TRACE GRMATrace
#else
inline void  <a class="code" href="grmaplay.h.html#a1">GRMATrace</a>(LPCTSTR, ...) { }
#define TRACE              1 ? (void)0 : ::GRMATrace
#endif

#endif






#if 1


/****************************************************************************
 * Includes
 */

#include "pntypes.h"
#include "pnwintyp.h"
#include "pncom.h"
#include "rmapckts.h"
#include "rmacomm.h"
#include "rmamon.h"
#include "rmafiles.h"
#include "rmaengin.h"
#include "rmacore.h"
#include "rmaclsnk.h"
#include "rmaerror.h"
#include "rmaauth.h"
#include "rmawin.h"

#include "rmasite2.h"
#include "rmavsurf.h"


//#include "os.h"

//#include "fivemmap.h"
//#include "exadvsnk.h"
//#include "exerror.h"
//#include "exsitsup.h"
//#include "exaumgr.h"
//#include "excontxt.h"

#endif

// for Direct X / 3D support
#include &lt;ddraw.h&gt;

#include "exvsurf.h"


// forwards
class <a class="code" href="class_exampleclientcontext.html">ExampleClientContext</a>;
class <a class="code" href="class_greporter.html">GReporter</a>; 



class <a class="code" href="class_grmaplayer.html">GRMAPlayer</a> 
{

public :

        FPRMCREATEENGINE        m_fpCreateEngine;
        FPRMCLOSEENGINE         m_fpCloseEngine;

    <a class="code" href="class_exampleclientcontext.html">ExampleClientContext</a>*   exContext;

        <a class="code" href="class_greporter.html">GReporter</a>*                       m_reporter; // Reporter object 
    
        IRMAPlayer*                             pPlayer; // should go into GRMAPlayerStream class 
    
        
        IRMAClientEngine*           pEngine;

#ifdef _UNIX
    IRMAClientEngineSelector* pSelector;
#endif

    <a class="code" href="class_irmaerrorsink.html">IRMAErrorSink</a>*          pErrorSink;
    IRMAErrorSinkControl* pErrorSinkControl;
    HINSTANCE               hDll;

public:

        <a class="code" href="class_grmaplayer.html#a0">GRMAPlayer</a>(); 
        <a class="code" href="class_grmaplayer.html#a1">~GRMAPlayer</a>(); 
        

        void <a class="code" href="class_grmaplayer.html#a2">SetReporter</a>(<a class="code" href="class_greporter.html">GReporter</a> *reporter);

        <a class="code" href="class_greporter.html">GReporter</a>* <a class="code" href="class_grmaplayer.html#a3">GetReporter</a>() { return m_reporter; }

        BOOL <a class="code" href="class_grmaplayer.html#a4">Init</a>();

        // Terminate Player context
        void <a class="code" href="class_grmaplayer.html#a5">Term</a>();

        // Player function 

        // Open the URL to play, (after Init)
        BOOL <a class="code" href="class_grmaplayer.html#a6">OpenURL</a>(const char* pszURL);
        
        // Tell the player to begin playback of all its sources.
        BOOL <a class="code" href="class_grmaplayer.html#a7">Play</a>(); 

        // Tell the player to stop playback of all its sources
        BOOL <a class="code" href="class_grmaplayer.html#a8">Stop</a>();

        // Tell the player to pause playback of all its sources.
        BOOL <a class="code" href="class_grmaplayer.html#a9">Pause</a>();

        // Ask the player if it is done with the current presentation
        BOOL <a class="code" href="class_grmaplayer.html#a10">IsDone</a>();

        // Ask the player whether it contains the live source // ??
        BOOL <a class="code" href="class_grmaplayer.html#a11">IsLive</a>();

        // Get the current time on the Player timeline
        ULONG32 <a class="code" href="class_grmaplayer.html#a12">GetCurrentTime</a>();

        // Tell the player to seek in the playback timeline of all its sources.
        BOOL <a class="code" href="class_grmaplayer.html#a13">Seek</a>(ULONG32                       ulTime);

        BOOL <a class="code" href="class_grmaplayer.html#a14">IsPlaying</a>() { return m_isPlaying; }

        HRESULT m_hr;
        BOOL m_isPlaying;

        BOOL m_dx;              // we want DX ouput ?

        HRESULT <a class="code" href="class_grmaplayer.html#a15">CreateSurface</a>(RMABitmapInfoHeader*   pBitmapInfo,
                                                                   <a class="code" href="class_gdsurfaceinfo.html">GDSurfaceInfo</a> &amp;surface);
        void <a class="code" href="class_grmaplayer.html#a18">ReleaseSurface</a>(<a class="code" href="class_gdsurfaceinfo.html">GDSurfaceInfo</a> &amp;surface);

        <a class="code" href="class_gdsurfaceinfo.html">GDSurfaceInfo</a> *m_lastSurface;
        <a class="code" href="class_gdsurfaceinfo.html">GDSurfaceInfo</a>* <a class="code" href="class_grmaplayer.html#a17">GetSurfaceInfo</a>() { return m_lastSurface; }

        // release any DD surfaces, device might been changed
        void  <a class="code" href="class_grmaplayer.html#a18">ReleaseSurface</a>(); 



        // the Direct Draw target surface 
        DDSURFACEDESC m_ddsd;

        IDirectDraw *m_pDD;
    IDirectDrawSurface *m_pSurface;
        IDirectDrawPalette *m_pDirectDrawPalette;
        RECT m_rect; // the rectangle of the surface

        BOOL m_waitingForSample; // clients waits for sample
        BOOL m_sampleReady; // we have delived a sample

        long m_frameBltsReceived; // #no of frame we received 
        long m_frameBltsFailed; // #no of frame we received 
        
        DWORD m_playStartTime;
        DWORD m_playStopTime;


        void <a class="code" href="class_grmaplayer.html#a19">ReleaseDDraw</a>();

        void <a class="code" href="class_grmaplayer.html#a20">SetDDraw</a>(IDirectDraw *pDD);

        // set a flag that we are ready to receive the next sample
        BOOL <a class="code" href="class_grmaplayer.html#a21">UpdateSample</a>(BOOL &amp;updateVideo) { 
                m_waitingForSample = TRUE; 
                return TRUE;
        } 

};

#endif _GRMAPlay_h_





</div></pre><hr><address><small>Generated at Thu Jan 27 18:46:18 2000 for blaxxunContact3D by
<a href="http://www.stack.nl/~dimitri/doxygen/index.html">
<img src="doxygen.gif" alt="doxygen" align=center border=0 
width=118 height=53></a> 1.0.0 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy; 1997-1999</small></address>
</body>
</html>
