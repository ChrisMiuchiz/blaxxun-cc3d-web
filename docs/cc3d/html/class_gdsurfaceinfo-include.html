<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<title>GDSurfaceInfo Include File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.0.0 on Thu Jan 27 18:44:27 2000 -->
<center>
<a class="qindex"href="index.html">Main Page</a> &nbsp; <a class="qindex"href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex"href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex"href="annotated.html">Compound List</a> &nbsp; <a class="qindex"href="files.html">File List</a> &nbsp; <a class="qindex"href="headers.html">Header Files</a> &nbsp; <a class="qindex"href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex"href="functions.html">Compound Members</a> &nbsp; <a class="qindex"href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>exvsurf.h</h1>This is the verbatim text of the exvsurf.h include file.<div class="fragment"><pre>/****************************************************************************
 * 
 *  $Id: exvsurf.h,v 1.2 1999/03/22 15:56:15 tom Exp $
 *  
 *  Copyright (C) 1995,1996,1997 Progressive Networks.
 *  All rights reserved.
 *
 *  This program contains proprietary 
 *  information of Progressive Networks, Inc, and is licensed
 *  subject to restrictions on use and distribution.
 *
 */


#ifndef _EXVSURF_H_
#define _EXVSURF_H_

#include "ddraw.h"

class <a class="code" href="class_gdsurfaceinfo.html">GDSurfaceInfo</a> {
public :
        DDSURFACEDESC                    m_desc; // target pixelformat
    LPDIRECTDRAWSURFACE      m_pSurface; // target DDRAW / Texture surface 
        IDirectDrawPalette*              m_pPalette;
        RECT                                     m_rect; // the rectangle of the surface
        RECT                                     m_targetRect; // the  rescaled rectangle of the surface
        
        <a class="code" href="class_gdsurfaceinfo.html#a0">GDSurfaceInfo</a>() : m_pSurface(NULL),m_pPalette(NULL) {
                memset(&amp;m_desc, 0, sizeof(m_desc));
                memset(&amp;m_rect, 0, sizeof(m_rect));
                memset(&amp;m_targetRect, 0, sizeof(m_targetRect));
                m_desc.dwSize = sizeof( m_desc);
                m_desc.ddpfPixelFormat.dwSize = sizeof(m_desc.ddpfPixelFormat);

        }
        
        // release surface &amp; palette 
        void <a class="code" href="class_gdsurfaceinfo.html#a1">Release</a>();

        BOOL <a class="code" href="class_gdsurfaceinfo.html#a2">Ok</a>() { return m_pSurface != NULL; }
        
        <a class="code" href="class_gdsurfaceinfo.html#a3">~GDSurfaceInfo</a>() 
        {
                <a class="code" href="class_gdsurfaceinfo.html#a1">Release</a>();
        }

}; 

// create a 256 DD dithering palette 
IDirectDrawPalette* 
<a class="code" href="exvsurf.h.html#a0">GRMACreateDD256Palette</a>(IDirectDraw *pdd);




// forward declares
class <a class="code" href="class_examplewindowlesssite.html">ExampleWindowlessSite</a>;
class <a class="code" href="class_grmaplayer.html">GRMAPlayer</a>;



class <a class="code" href="class_examplevideosurface.html">ExampleVideoSurface</a> : <a class="code" href="class_irmavideosurface.html">IRMAVideoSurface</a>
{
private:
    virtual <a class="code" href="class_examplevideosurface.html#c0">~ExampleVideoSurface</a>();

protected:
    PRIVATE_DESTRUCTORS_ARE_NOT_A_CRIME

    LONG32                                      m_lRefCount;
        <a class="code" href="class_iunknown.html">IUnknown</a>*                               m_pContext;
    RMABitmapInfoHeader*    m_pBitmapInfo;
    <a class="code" href="class_examplewindowlesssite.html">ExampleWindowlessSite</a>*  m_pSiteWindowless;
    
        RMABitmapInfoHeader         m_lastBitmapInfo;


public:
        // DDDRAW stuff
        
        // problem: do we have one main surface
        // or several child surfaces (SMIL ??)
        <a class="code" href="class_gdsurfaceinfo.html">GDSurfaceInfo</a>* <a class="code" href="class_examplevideosurface.html#a0">GetSurfaceInfo</a>() { return &amp;m_surface; }
        <a class="code" href="class_gdsurfaceinfo.html">GDSurfaceInfo</a>                    m_surface;
/*
        DDSURFACEDESC                    m_targetFormatDSDesc; // target pixelformat
    LPDIRECTDRAWSURFACE      m_pTargetDDSurface; // target DDRAW / Texture surface 
        IDirectDrawPalette*              m_pDirectDrawPalette;
        RECT                                     m_rect; // the rectangle of the surface
*/
   
public:

    <a class="code" href="class_examplevideosurface.html#a1">ExampleVideoSurface</a>(<a class="code" href="class_iunknown.html">IUnknown</a>* pContext, <a class="code" href="class_examplewindowlesssite.html">ExampleWindowlessSite</a>* pSiteWindowless);

    PN_RESULT   <a class="code" href="class_gmemmap.html#a5">Init</a>();

    /*
     *  IUnknown methods
     */
    <a class="code" href="class_examplevideosurface.html#a3">STDMETHOD</a>(QueryInterface)   (THIS_
                                REFIID riid,
                                void** ppvObj);

    <a class="code" href="class_examplevideosurface.html#a4">STDMETHOD_</a>(ULONG32,AddRef)  (THIS);

    <a class="code" href="class_examplevideosurface.html#a4">STDMETHOD_</a>(ULONG32,Release) (THIS);

    /*
     * IRMAVideoSurface methods usually called by renderers to
     * Draw on the surface
     */
    <a class="code" href="class_examplevideosurface.html#a3">STDMETHOD</a>(Blt)              (THIS_
                                UCHAR*                  /*IN*/  pImageData, 
                                RMABitmapInfoHeader*    /*IN*/  pBitmapInfo, 
                                REF(PNxRect)            /*IN*/  inDestRect,
                                REF(PNxRect)            /*IN*/  inSrcRect);

    <a class="code" href="class_examplevideosurface.html#a3">STDMETHOD</a>(BeginOptimizedBlt)(THIS_ 
                                RMABitmapInfoHeader*    /*IN*/  pBitmapInfo);
    
    <a class="code" href="class_examplevideosurface.html#a3">STDMETHOD</a>(OptimizedBlt)     (THIS_
                                UCHAR*                  /*IN*/  pImageBits,
                                REF(PNxRect)            /*IN*/  rDestRect, 
                                REF(PNxRect)            /*IN*/  rSrcRect);
    
    <a class="code" href="class_examplevideosurface.html#a3">STDMETHOD</a>(EndOptimizedBlt)  (THIS);

    <a class="code" href="class_examplevideosurface.html#a3">STDMETHOD</a>(GetOptimizedFormat)(THIS_
                                  REF(RMA_COMPRESSION_TYPE) /*OUT*/ ulType);

    <a class="code" href="class_examplevideosurface.html#a3">STDMETHOD</a>(GetPreferredFormat)(THIS_
                                  REF(RMA_COMPRESSION_TYPE) /*OUT*/ ulType);
};

#endif  // _EXVSURF_H_

</div></pre><hr><address><small>Generated at Thu Jan 27 18:44:27 2000 for blaxxunContact3D by
<a href="http://www.stack.nl/~dimitri/doxygen/index.html">
<img src="doxygen.gif" alt="doxygen" align=center border=0 
width=118 height=53></a> 1.0.0 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy; 1997-1999</small></address>
</body>
</html>
