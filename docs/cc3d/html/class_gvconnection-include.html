<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<title>GvConnection Include File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.0.0 on Thu Jan 27 18:48:07 2000 -->
<center>
<a class="qindex"href="index.html">Main Page</a> &nbsp; <a class="qindex"href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex"href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex"href="annotated.html">Compound List</a> &nbsp; <a class="qindex"href="files.html">File List</a> &nbsp; <a class="qindex"href="headers.html">Header Files</a> &nbsp; <a class="qindex"href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex"href="functions.html">Compound Members</a> &nbsp; <a class="qindex"href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>gvconnection.h</h1>This is the verbatim text of the gvconnection.h include file.<div class="fragment"><pre>/*=============================================================================

This code is licensed under the Web3D-blaxxun Community Source License,
provided in distribution file LICENSE.TXT and available online at
http://www.web3D.org/TaskGroups/x3d/blaxxun/Web3D-blaxxunCommunitySourceAgreement.html
and may only be used for non-commercial use as specified in that license.

THE WEB3D CONSORTIUM AND BLAXXUN DO NOT MAKE AND HEREBY DISCLAIM ANY EXPRESS
OR IMPLIED WARRANTIES RELATING TO THIS CODE, INCLUDING BUT NOT LIMITED TO,
WARRANTIES OF NON-INFRINGEMENT, MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE, OR ANY WARRANTIES THAT MIGHT ARISE FROM A COURSE OF DEALING, USAGE
OR TRADE PRACTICE.  THE COMMUNITY SOURCE CODE IS PROVIDED UNDER THIS
AGREEMENT "AS IS," WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
INCLUDING, WITHOUT LIMITATION, WARRANTIES THAT THE COMMUNITY SOURCE CODE ARE
FREE OF DEFECTS, MERCHANTABLE, FIT FOR A PARTICULAR PURPOSE OR
NON-INFRINGING OR IN ANY WAY CONSTITUTE THE COMPLETE PRODUCT MARKETED UNDER
THE NAMES GIVEN SAID CODE.

==============================================================================*/
#ifndef  _GV_GvConnection_
#define  _GV_GvConnection_
/******************************************************************************
@doc

@module GvConnection.h - VRML Node low-level ROUTE handling|

Copyright (c) 1996 - 1999 by Holger Grahn
All rights reserved

Purpose:
Connections are low-level linked list items stored
at field or node level in order to implement :

        ROUTE event Forwarding 
        script eventIn function calling
        Parent - child relations ship
        PROTO IS information storage


Classes:
&lt;c GvConnection&gt;


Notes:


Changes:

$Revision: 1.7 $
$Log: gvconnection.h,v $
Revision 1.7  1999/07/06 16:34:35  tom
*** empty log message ***

Revision 1.6  1999/05/10 13:53:43  tom
*** empty log message ***



Todo :

******************************************************************************/



#include &lt;gvnode.h&gt;

class <a class="code" href="class_gvproto.html">GvProto</a>;
class <a class="code" href="class_gvprotoinstance.html">GvProtoInstance</a>;


class <a class="code" href="class_gvconnection.html">GvConnection</a>  : public <a class="code" href="class_rtroot.html">RTRoot</a> {
    
    <a class="code" href="class_gvnode.html#a0">RT</a>(<a class="code" href="class_gvconnection.html">GvConnection</a>);
public:
    
    <a class="code" href="class_gvconnection.html">GvConnection</a> *next; // linked list of connections 
    
        <a class="code" href="class_gvnode.html#l0">GvConnection</a>() : next(NULL) {} 
    virtual <a class="code" href="class_gvconnection.html#a1">~GvConnection</a>() {} 


        // for connections using fields / event forwarding
    int virtual <a class="code" href="class_gvconnection.html#a2">OnTrigger</a>(<a class="code" href="class_gvfield.html">GvField</a> *from);

        // connections using nodes
    int virtual <a class="code" href="class_gvconnection.html#a2">OnTrigger</a>(<a class="code" href="class_gvnode.html">GvNode</a> *from);

/*  for performance / debug tuning
        // counter on triggered connections 
        static int connectionsTriggeredCnt;

        // get counter off triggered connections 
        static int getTriggeredConnectionsCnt() { return connectionsTriggeredCnt; }

        // set counter off triggered connections to zero
        static void clearTriggeredConnectionsCnt() { connectionsTriggeredCnt = 0 ;}
*/

};


#if 1

/*
    GvRouteToConnection
        helper class to store all ROUTE related information
*/

class <a class="code" href="class_gvroutetoconnection.html">GvRouteToConnection</a> : public <a class="code" href="class_gvconnection.html">GvConnection</a> {

    <a class="code" href="class_gvnode.html#a0">RT</a>(<a class="code" href="class_gvroutetoconnection.html">GvRouteToConnection</a>);

public:
  // source node for route
        <a class="code" href="class_gvnode.html">GvNode</a>          *from;
    int                 fromEventIndex;
    
        // destination node for route
    <a class="code" href="class_gvnode.html">GvNode</a>              *to;
    int                 toEventIndex;

    
    <a class="code" href="class_gvroutetoconnection.html#a0">GvRouteToConnection</a>(<a class="code" href="class_gvnode.html">GvNode</a> *from_=NULL, int fromIndex_=-1, 
                                                <a class="code" href="class_gvnode.html">GvNode</a> *to_=NULL,int toIndex_=-1)
                : <a class="code" href="class_gvroutetoconnection.html#a2">from</a>(from_),<a class="code" href="class_gvroutetoconnection.html#a3">fromEventIndex</a>(fromIndex_),  
                  <a class="code" href="class_gvroutetoconnection.html#a4">to</a>(to_),<a class="code" href="class_gvroutetoconnection.html#a5">toEventIndex</a>(toIndex_) 
        {};

    
    // int OnTrigger(GvField *from); // do nothing here

        // special case here :
        // if destroyed, inform "to" that incomming route has been deleted
        // inorder to prevent ROUTE triggering to deleted target nodes
        <a class="code" href="class_gvroutetoconnection.html#a1">~GvRouteToConnection</a>();


};

/*

  ROUTE target node stores a GvRouteFromConnection
  at node level for each incomming ROUTE

  so destructor can safely call deleteRoute all in routes

*/
class <a class="code" href="class_gvroutefromconnection.html">GvRouteFromConnection</a> : public <a class="code" href="class_gvconnection.html">GvConnection</a> {

    <a class="code" href="class_gvnode.html#a0">RT</a>(<a class="code" href="class_gvroutefromconnection.html">GvRouteFromConnection</a>);

        <a class="code" href="class_gvroutetoconnection.html">GvRouteToConnection</a> *routeToConnection;
        // points to corresponding ROUTE Connection 

        <a class="code" href="class_gvroutefromconnection.html#c1">GvRouteFromConnection</a> (<a class="code" href="class_gvroutetoconnection.html">GvRouteToConnection</a> *from=NULL)
                : <a class="code" href="class_gvroutefromconnection.html#c2">routeToConnection</a>(from)
        { }



};

/*
    GvSetFieldConnection
        trigger does a set value on to field 
*/

class <a class="code" href="class_gvsetfieldconnection.html">GvSetFieldConnection</a> : public <a class="code" href="class_gvroutetoconnection.html">GvRouteToConnection</a> {

    <a class="code" href="class_gvnode.html#a0">RT</a>(<a class="code" href="class_gvsetfieldconnection.html">GvSetFieldConnection</a>);

public:

    <a class="code" href="class_gvfield.html">GvField</a> *toField; // ROUTE target field
    
    <a class="code" href="class_gvsetfieldconnection.html#a0">GvSetFieldConnection</a>(<a class="code" href="class_gvnode.html">GvNode</a> *from=NULL, int fromIndex=-1, 
                                                 <a class="code" href="class_gvnode.html">GvNode</a> *to=NULL, int toIndex=-1,
                                                 <a class="code" href="class_gvfield.html">GvField</a> *toField_=NULL):
                                                <a class="code" href="class_gvroutetoconnection.html">GvRouteToConnection</a>(from,fromIndex,to,toIndex),
                                                toField(toField_) {};


        // simple constructor, for PROTO IS tzpe connections 
    <a class="code" href="class_gvsetfieldconnection.html#a0">GvSetFieldConnection</a>(<a class="code" href="class_gvfield.html">GvField</a> *to_):toField(to_) {};
                                                
    int <a class="code" href="class_gvconnection.html#a2">OnTrigger</a>(<a class="code" href="class_gvfield.html">GvField</a> *from);

};

// node callback signature, for eventIn methods
//
typedef <a class="code" href="glext.h.html#a131">void</a> (GvNode::*GvNodeEventInMethod)(<a class="code" href="class_gvfield.html">GvField</a> *val);


/*
    OnTrigger calls a node method with field as event argument
*/


class <a class="code" href="class_gvnodemethodconnection.html">GvNodeMethodConnection</a> : public <a class="code" href="class_gvroutetoconnection.html">GvRouteToConnection</a> {

    <a class="code" href="class_gvnode.html#a0">RT</a>(<a class="code" href="class_gvnodemethodconnection.html">GvNodeMethodConnection</a>);

public:

    void (GvNode::*method)(<a class="code" href="class_gvfield.html">GvField</a> *event);             // the eventIn method
    
    <a class="code" href="class_gvnodemethodconnection.html#a0">GvNodeMethodConnection</a>(<a class="code" href="class_gvnode.html">GvNode</a> *from=NULL, int fromIndex=-1, 
                                                 <a class="code" href="class_gvnode.html">GvNode</a> *to=NULL, int toIndex=-1,
                                                 GvNodeEventInMethod method_ = NULL):
                                                
                                                <a class="code" href="class_gvroutetoconnection.html">GvRouteToConnection</a>(from,fromIndex,to,toIndex),
                                                method(method_) { };

        // allow simple constructor for OnTrigger calls 
    <a class="code" href="class_gvnodemethodconnection.html#a0">GvNodeMethodConnection</a>(<a class="code" href="class_gvnode.html">GvNode</a> *to_,GvNodeEventInMethod method_): method(method_) { to = to_;};
  
    int <a class="code" href="class_gvconnection.html#a2">OnTrigger</a>(<a class="code" href="class_gvfield.html">GvField</a> *from);

};


#else
/*
    GvSetFieldConnection
        trigger does a set value on to field 
*/

class <a class="code" href="class_gvsetfieldconnection.html">GvSetFieldConnection</a> : public <a class="code" href="class_gvconnection.html">GvConnection</a> {

    <a class="code" href="class_gvnode.html#a0">RT</a>(<a class="code" href="class_gvsetfieldconnection.html">GvSetFieldConnection</a>);

public:

    <a class="code" href="class_gvfield.html">GvField</a> *to; // ROUTE target field
    
    <a class="code" href="class_gvsetfieldconnection.html#a0">GvSetFieldConnection</a>(<a class="code" href="class_gvfield.html">GvField</a> *to_=NULL):to(to_) {};

    
    int <a class="code" href="class_gvconnection.html#a2">OnTrigger</a>(<a class="code" href="class_gvfield.html">GvField</a> *from);



};

// node callback signature, for eventIn methods
//
typedef <a class="code" href="glext.h.html#a131">void</a> (GvNode::*GvNodeEventInMethod)(<a class="code" href="class_gvfield.html">GvField</a> *val);

/*
    trigger call a node method with field
*/


class <a class="code" href="class_gvnodemethodconnection.html">GvNodeMethodConnection</a> : public <a class="code" href="class_gvconnection.html">GvConnection</a> {

    <a class="code" href="class_gvnode.html#a0">RT</a>(<a class="code" href="class_gvnodemethodconnection.html">GvNodeMethodConnection</a>);

public:

    <a class="code" href="class_gvnode.html">GvNode</a> *to;         // ROUTE target node 

    void (GvNode::*method)(<a class="code" href="class_gvfield.html">GvField</a> *event);             // the eventIn method
    
    <a class="code" href="class_gvnodemethodconnection.html#a0">GvNodeMethodConnection</a>(<a class="code" href="class_gvnode.html">GvNode</a> *to_=NULL,GvNodeEventInMethod method_ = NULL):to(to_),method(method_) { };

  
    int <a class="code" href="class_gvconnection.html#a2">OnTrigger</a>(<a class="code" href="class_gvfield.html">GvField</a> *from);

};

#endif


#if 0
/*
    trigger does a set value on to field 

  not needed
*/

class GvSendNodeEventConnection : public <a class="code" href="class_gvconnection.html">GvConnection</a> {
public:

    <a class="code" href="class_gvnode.html">GvNode</a> *to;
    const char *event;


    GvSendNodeEventConnection(<a class="code" href="class_gvnode.html">GvNode</a> *to_=NULL,const char *event_=NULL): to(to_), event(event_) {};

    int <a class="code" href="class_gvconnection.html#a2">OnTrigger</a>(<a class="code" href="class_gvfield.html">GvField</a> *value);

};
#endif

/*
  Pseudo connection storing IS node.field relations for Proto storage 

*/
class <a class="code" href="class_gvisfieldconnection.html">GvIsFieldConnection</a> : public <a class="code" href="class_gvconnection.html">GvConnection</a> 
{
    <a class="code" href="class_gvnode.html#a0">RT</a>(<a class="code" href="class_gvisfieldconnection.html">GvIsFieldConnection</a>);


public:
    <a class="code" href="class_gvnode.html">GvNode</a> *to;
    <a class="code" href="class_gvname.html">GvName</a> event;
    int <a class="code" href="class_gvconnection.html#a2">OnTrigger</a>(<a class="code" href="class_gvfield.html">GvField</a> *value);

    // add connection from to-&gt;field to toField 
    int <a class="code" href="class_gvisfieldconnection.html#a1">addFromConnection</a>(<a class="code" href="class_gvfield.html">GvField</a> *toField);

    // read target connection 
    GvBool <a class="code" href="class_gvscene.html#a30">read</a>(<a class="code" href="class_gvinput.html">GvInput</a> *in, const <a class="code" href="class_gvname.html">GvName</a> &amp;name);

};


/*
  Pseudo connection storing IS node.field relations for Proto storage 

*/
class <a class="code" href="class_gvprotoisconnection.html">GvProtoIsConnection</a> : public <a class="code" href="class_gvconnection.html">GvConnection</a> 
{
    <a class="code" href="class_gvnode.html#a0">RT</a>(<a class="code" href="class_gvprotoisconnection.html">GvProtoIsConnection</a>);

public:
    <a class="code" href="class_gvnode.html">GvNode</a>* proto;              //Pointer to node // GvNodeHandle would keep REF !!!

    //GvName event;   // not really need
    int index;      // index into field/table of proto
    
    <a class="code" href="class_gvprotoisconnection.html#a0">GvProtoIsConnection</a>(<a class="code" href="class_gvnode.html">GvNode</a> *Proto=NULL,int toIndex=-1) : proto(Proto),index(toIndex) {}

    int <a class="code" href="class_gvconnection.html#a2">OnTrigger</a>(<a class="code" href="class_gvfield.html">GvField</a> *value);

    // get the actual value 
    <a class="code" href="class_gvfield.html">GvField</a> *<a class="code" href="class_gvprotoisconnection.html#a2">eval</a>(<a class="code" href="class_gvprotoinstance.html">GvProtoInstance</a> *instance);

    // add connection from to-&gt;field to toField 
    //int addFromConnection(GvField *toField);

        //~GvProtoIsConnection();

};


/*
  Pseudo connection storing IS node.event relations for Proto storage 
  stored in connection at NODE level
  will be instanced during ProtoInstance::Instance

*/
class <a class="code" href="class_gvprotoeventisconnection.html">GvProtoEventIsConnection</a> : public <a class="code" href="class_gvconnection.html">GvConnection</a> 
{
    <a class="code" href="class_gvnode.html#a0">RT</a>(<a class="code" href="class_gvprotoeventisconnection.html">GvProtoEventIsConnection</a>);

public:
    <a class="code" href="class_gvnode.html">GvNode</a> *proto; // GvNodeHandle would keep REF !!!
  
        int protoIndex;     // index into field/table of proto
    int nodeIndex;      // index into field of node 
        
        GvBool eventIn;         // this will be an eventIn to node (event nodeIndex) , otherwise eventOut
        GvBool eventOut;        // this will be an eventOut from node (event nodeIndex) , otherwise eventOut
        GvBool copyEventOutValue;
    
    <a class="code" href="class_gvprotoeventisconnection.html#a0">GvProtoEventIsConnection</a>(<a class="code" href="class_gvnode.html">GvNode</a> *Proto=NULL,int toIndex=-1,int fromIndex = -1,
                GvBool isEventIn=TRUE,GvBool isEventOut=FALSE,GvBool copyEventOut = FALSE) : 
        proto(Proto),protoIndex(toIndex),nodeIndex(fromIndex),eventIn(isEventIn),eventOut(isEventOut),copyEventOutValue(copyEventOut) {}

    int <a class="code" href="class_gvconnection.html#a2">OnTrigger</a>(<a class="code" href="class_gvfield.html">GvField</a> *value);

        // add the route 
        GvBool <a class="code" href="class_gvscene.html#d0">instanceRoute</a>(<a class="code" href="class_gvprotoinstance.html">GvProtoInstance</a> *protoInstance,<a class="code" href="class_gvnode.html">GvNode</a> *me); 

        //~GvProtoEventIsConnection();
};

/*
  Pseudo connection storing IS  node.field relations for Proto storage 
  stored in connection at NODE level
  will be instanced during ProtoInstance::Instance
  Normal field IS connections are stored in field level,
  need for Script because fields are not yet instanced when IS in Script
  interface encountered.


*/
class <a class="code" href="class_gvprotofieldisconnection.html">GvProtoFieldIsConnection</a> : public <a class="code" href="class_gvconnection.html">GvConnection</a> 
{
    <a class="code" href="class_gvnode.html#a0">RT</a>(<a class="code" href="class_gvprotofieldisconnection.html">GvProtoFieldIsConnection</a>);

public:
    <a class="code" href="class_gvnode.html">GvNode</a> *proto; // GvNodeHandle would keep REF !!!
  
        int protoIndex;     // index into field/table of proto
    int nodeIndex;      // index into field of node 
        
        GvBool eventIn;         // this will be an eventIn to node (event nodeIndex) , otherwise eventOut
    
    <a class="code" href="class_gvprotofieldisconnection.html#a0">GvProtoFieldIsConnection</a>(<a class="code" href="class_gvnode.html">GvNode</a> *Proto=NULL,int toIndex=-1,int fromIndex = -1,GvBool isEventIn = TRUE) : proto(Proto),protoIndex(toIndex),nodeIndex(fromIndex),eventIn(isEventIn) {}

    int <a class="code" href="class_gvconnection.html#a2">OnTrigger</a>(<a class="code" href="class_gvfield.html">GvField</a> *value);

        // copy the value 
        GvBool <a class="code" href="class_gvprotofieldisconnection.html#a2">copyValue</a>(<a class="code" href="class_gvprotoinstance.html">GvProtoInstance</a> *protoInstance,<a class="code" href="class_gvnode.html">GvNode</a> *me); 

        //~GvProtoFieldIsConnection();
};


#if 0 
// Connections to a node 

// replaced by owners list in Node 

class GvOwnerConnection : public <a class="code" href="class_gvconnection.html">GvConnection</a> {

    <a class="code" href="class_gvnode.html#a0">RT</a>(GvOwnerConnection);

public:

    <a class="code" href="class_gvnode.html">GvNode</a> *to;
    
    GvOwnerConnection(<a class="code" href="class_gvnode.html">GvNode</a> *to_=NULL):to(to_) {};
    
    int <a class="code" href="class_gvconnection.html#a2">OnTrigger</a>(<a class="code" href="class_gvnode.html">GvNode</a> *from);


};

#endif


#endif /* _GV_GvConnection_ */
</div></pre><hr><address><small>Generated at Thu Jan 27 18:48:07 2000 for blaxxunContact3D by
<a href="http://www.stack.nl/~dimitri/doxygen/index.html">
<img src="doxygen.gif" alt="doxygen" align=center border=0 
width=118 height=53></a> 1.0.0 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy; 1997-1999</small></address>
</body>
</html>
